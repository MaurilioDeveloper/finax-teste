<meta charset="UTF-8">
<div class="tab-pane" id="panel-724569">
	<div class="tab-content">
		<div class="form-group">
			<div class="panel panel-default">
				<div class="panel-body">
					<div class="alert alert-danger" role="alert" data-ng-if="pessoaCtrl.abas.pessoasRelacionadas.erros.length">
						<span data-ng-repeat="erro in pessoaCtrl.abas.pessoasRelacionadas.erros" class="block">{{erro.mensagem}}</span>
					</div>				
					<div class="panel-content">
						<div class="row">
							<div class="col-md-3 col-lg-3 col-sm-3 form-group" data-ng-if="pessoaCtrl.acao != 'V'" align="left">		
								<button type="button" class="btn btn-primary" style="margin-top: 25px" 
									data-ui-sref="root.incluir({acao:'I',identificador:undefined,pessoaRelacionada:true, 
										tipoPessoa: pessoaCtrl.pessoa.tipoPessoa, identificadorPai: pessoaCtrl.pessoa.identificador, tab:1 })" 
									data-ui-sref-opts="{reload: true}">Incluir Nova Pessoa</button>
							</div>
						</div>
						<div class="col-lg-12" style="padding-left: 0px"> 
							<table class="table table-striped" style="margin-top: 15px">
								<thead>
									<tr>
										<th>Nome Completo/Razão Social</th>
										<th>CPF/CNPJ/Estrangeiro </th>
										<th>Tipo</th>
										<th>Data Início</th>
										<th>Data Fim</th>
										<th></th>
									</tr>
								</thead>
								<tbody>
									<tr data-ng-repeat="pessoa in pessoasRelacionadasCtrl.listaPessoasRelacionadas">
										<td>{{pessoa.id.pessoaRelacionada.nomeRazao.toUpperCase()}}</td>
										<td data-ng-if="!pessoa.estrangeiro">{{pessoa.id.pessoaRelacionada.identificador | cpfcnpj}}</td>
										<td data-ng-if="pessoa.estrangeiro">{{pessoa.id.pessoaRelacionada.identificador}}</td>
										<td>{{pessoa.id.papel.descricao.toUpperCase()}}</td>
										<td>{{pessoa.dataIniRelacionamento | date }}</td>
										<td>{{pessoa.dataFimRelacionamento ? (pessoa.dataFimRelacionamento | date) : '' }}</td>
										<td>
											<button type="button" class="btn btn-default btn-xs" data-ng-if="pessoaCtrl.acao != 'V'" data-tooltip="Editar" data-ng-click="pessoasRelacionadasCtrl.editar(pessoa)">
												<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
											</button>
											<button type="button" class="btn btn-default btn-xs" data-ng-click="pessoasRelacionadasCtrl.excluir(pessoa);" data-ng-if="pessoaCtrl.acao != 'V'" data-tooltip="Excluir">
												<span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
											</button>
										</td>
									</tr>
									<tr ng-if="!pessoasRelacionadasCtrl.listaPessoasRelacionadas.length">
										<td colspan="6">Não há registros encontrados.</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>	
</div>